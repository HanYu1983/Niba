version: "3"
services:
  # docker-compose run --rm elm init
  # docker-compose run --rm elm make src/Main.elm --optimize --output=public/elm.js
  elm:
    image: codesimple/elm:0.19
    working_dir: /han
    volumes:
      - ./:/han
  http-server:
    build: docker-script/http-server/
    working_dir: /han
    volumes:
      - ./public:/han/public
    ports:
      - 8080:8080
    command: node_modules/http-server/bin/http-server -c-1 -p 8080
  # https://stackoverflow.com/questions/64247833/how-to-proxy-pass-api-path-to-port-with-nginx
  http-server2:
    image: nginx:1.25
    volumes: 
      - ./nginx.conf:/etc/nginx/conf.d/default.conf
      - ./public:/han/public
    ports:
      - 8081:8081